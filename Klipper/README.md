# Klipper Tuning and RPI Documentation!
Welcome to the documentation of the prtinters. This isnt going to as extensive and user friendly as the Cura setup. If you have any questions, talk to me in person or ask in support forums online.
<br><br><br><br>

# What Will be Covered?
Most of the things there is to known can be read in the <a href="https://www.klipper3d.org/Overview.html">Klipper Documentation</a>. The only things I will cover in this document is setup of the raspberry pi, setup of the access point, and my basic tuning on this printer, and the custom .def.json for this printer on Cura. This was a very large project for me, but I really enjoyed it and hope others can benifit or learn from it.
<br><br><br><br>

# The Raspberry Pi
The entire klipper setup runs on a Raspberry Pi 3 B+ on Raspberry Pi OS based on Debian 11 (not Debian 12 in this specific case). It has 1GBs of ram which is enough for 2 basic cartesian printers running at low speeds and possibly a webcam, which I didnt implement incase it violated privacy in some way.
<br><br><br><br>

# The Access Point
This was one of the hardest parts of the project. When I first tried to set it up, I was learning how to configure this on Debian 11 using <a href="https://learn.adafruit.com/setting-up-a-raspberry-pi-as-a-wifi-access-point/overview">this guide</a>. Raspberry pi OS recently switched to Debian 12 at the time which has systemd-networkd alongside NetworkManager; this created ip address conflicts between systemd-networkd and HostAPD. After I banged my head against a very solid brick wall which was this problem for a week, I figured it out and switched to Debian 11. For setting up the access point, you need DNSMasq and hostAPD. DNSMasq is responsible for both DHCP which assigns ip addresses on a network, and DNS which is responsible for translating domain names into IP addresses. hostAPD is used to create a wireless hotspot. After installing DNSMasq and hostAPD, set hostAPD to start on boot. You will also need to install netfilter-persistant and iptables-persistant which are used managing firewall rules defined by iptables. You then need to modify /etc/dhcpcd.conf and set 192.168.4.1 as the raspberry pis own static ip. Then enable ipv4 forwarding in /etc/sysctl.d/routed-ap.conf. Make sure to also edit /etc/dnsmasq.conf and give it a pool of ip addresses that DHCP can assign to devices. Lastly, and most importantly, edit /etc/hostapd/hostapd.conf to broadcast the proper access point for you to connect to; for our specific case, we set the country code to US, hw_mode to g, channel to 8 (check 5ghz vs 2.4ghz and <a href="https://en.wikipedia.org/wiki/List_of_WLAN_channels">WLAN Channels</a>).
<br><br><br><br>

# Tuning Klipper
My klipper tuning was very simple and had only a few goals: get semi-high speeds, compensate for artifacts, tune common issues, make it as easy to use. Nowadays, max speed is based on how much flow you can push through the hotend. I didnt change the stock hotend to make easy reversiblity possible, so the flow is roughly 12mm/s^3 on PLA at 220c. see how high of velocity you can do with those speeds, and stick to it. After that, tune your input shaper (I chose mzv which isnt as aggresive of a shaper) with properly tightened boltes and belts, then use the recommended accelerations. I also set the retractions in the slicer to have higher speed at shorter distances to make many different PLA brands work well, and to reduce time. For simplicity, I made profiles that you can import into Cura with relative ease. The only significant changes to the printer.def.json where the name (which makes it easy to find), and the start/end gcode. I also have the user install a plugin which sends prints to Klipper directly from the slicer so they dont have to access Mainsail interface. All of this combined creates a simple process: find a model to print, choose if you want supports or not, and send it off to the printer. This elminates steps like bed leveling, changing material settings, tuning, or figuring out any UI's; this makes this a kind of "hit go and let it do its thing" printer (which so far it is!).
